{"version":3,"sources":["app.js","EtsyApi.js","etsyShow.js","etsyUser.js","routing.js","init.js"],"names":["app","EtsyApi","spec","apiKey","console","log","baseUrl","apiVersion","self","listings","url","promise","$","Deferred","req","getJSON","done","data","ok","resolve","reject","userDetail","userID","etsyShow","api","_","template","html","variable","get","items","results","fail","status","err","text","error","etsyUser","users","routingPage","showUsers","processHash","hash","location","r","run","slice","Rlite","add","params","name","window","addEventListener","page"],"mappings":"AACA,GAAAA,OCDAA,KAAAC,QAAA,SAAAC,GACA,IAAAA,EAAAC,OACA,KAAAC,SAAAC,IAAA,wBAGA,IAAAC,GAAA,6BAAAJ,EAAAK,YAAA,KAqCA,OAjCAC,OAEAC,SAAA,WACA,GAAAC,GAAAJ,EAAA,2DAAAJ,EAAAC,OAAA,cACAQ,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAIAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,IAEAU,WAAA,SAAAC,GACA,GAAAZ,GAAAJ,EAAA,UAAAgB,EAAA,uBAAApB,EAAAC,OAAA,cACAQ,EAAAC,EAAAC,WAEAC,EAAAF,EAAAG,QAAAL,GAAAM,KAAA,SAAAC,GACAA,EAAAC,GAGAP,EAAAQ,QAAAF,GAFAN,EAAAS,OAAAN,EAAA,gBAAAG,IAMA,OAAAN,KAIAH,MC1CAR,IAAAuB,SAAA,WACA,CAAA,GAAAC,GAAAxB,IAAAC,SAAAE,OAAA,4BACAsB,GAAAC,SAAAd,EAAA,aAAAe,QAAAC,SAAA,MACAJ,EAAAf,WACAO,KAAA,SAAAC,GAGAL,EAAAiB,IAAA,uBAAAb,KAAA,SAAAW,GACA,GAAAD,GAAAD,EAAAC,SAAAC,GAAAC,SAAA,KACAhB,GAAA,iBAAAe,KAAAD,GAAAI,MAAAb,EAAAc,eAGAC,KAAA,SAAAlB,EAAAmB,EAAAC,GACAtB,EAAA,iBAAAuB,KAAAD,EAAAE,UCbApC,IAAAqC,SAAA,SAAAf,GACA,CAAA,GAAAE,GAAAxB,IAAAC,SAAAE,OAAA,4BACAsB,GAAAC,SAAAd,EAAA,aAAAe,QAAAC,SAAA,MACAJ,EAAAH,WAAAC,GACAN,KAAA,SAAAC,GAGAL,EAAAiB,IAAA,mBAAAb,KAAA,SAAAW,GACA,GAAAD,GAAAD,EAAAC,SAAAC,GAAAC,SAAA,KACAxB,SAAAC,IAAAY,EAAAc,SACAnB,EAAA,iBAAAe,KAAAD,GAAAY,MAAArB,EAAAc,eAGAC,KAAA,SAAAlB,EAAAmB,EAAAC,GACAtB,EAAA,iBAAAuB,KAAAD,EAAAE,UCdApC,IAAAuC,YAAA,WAgBA,QAAAC,KACApC,QAAAC,IAAA,WACAO,EAAAiB,IAAA,oBAAAb,KAAA,SAAAW,GACAf,EAAA,iBAAAe,KAAAA,KAMA,QAAAc,KACA,GAAAC,GAAAC,SAAAD,MAAA,GAEAE,GAAAC,IAAAH,EAAAI,MAAA,KACAlC,EAAA,iBAAAuB,KAAA,kBA1BA,GAAAS,GAAAG,OAGAH,GAAAI,IAAA,GAAAhD,IAAAuB,UAGAqB,EAAAI,IAAA,QAAAR,GAGAI,EAAAI,IAAA,cAAA,SAAAJ,GACA5C,IAAAqC,SAAAO,EAAAK,OAAAC,QAoBAC,OAAAC,iBAAA,aAAAX,GACAA,KClCA7B,EAAA,WACA,GAAAyC,GAAAzC,EAAA,QAAAK,KAAA,OACAjB,KAAAqD","file":"app.js","sourcesContent":["// The namespace for this application\nvar app = {};\n","app.EtsyApi = function(spec) {\n  if(!spec.apiKey) {\n    throw console.log('you must enter an api');\n  }\n\n  var baseUrl = 'https://openapi.etsy.com/' + (spec.apiVersion || 'v2');\n\n\n\n  self = {\n\n    listings: function() {\n      var url = baseUrl + '/listings/active.js?limit=25&includes=MainImage&api_key=' + spec.apiKey + '&callback=?';\n      var promise= $.Deferred();\n\n      var req = $.getJSON(url).done(function(data){\n        if(!data.ok) {\n\n          promise.reject(req, 'Unknown Error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    },\n    userDetail: function(userID) {\n      var url = baseUrl + '/users/' + userID + '/profile.js?api_key=' + spec.apiKey + '&callback=?';\n      var promise= $.Deferred();\n\n      var req = $.getJSON(url).done(function(data){\n        if(!data.ok) {\n          promise.reject(req, 'Unknown Error', data);\n        } else {\n          promise.resolve(data);\n        }\n      });\n\n      return promise;\n    }\n  };\n\n  return self;\n};\n","app.etsyShow = function() {\n  var api = app.EtsyApi({ apiKey: 'j4t40f6swvekws6carlvptkh' });\n  var listTemplate = _.template($('#etsyShow').html(), { variable: 'm' });\n  api.listings()\n    .done(function (data) {\n      // Let's put the data in the console so we can\n      // explore it...\n      $.get('views/listings.html').done(function (html) {\n        var template = _.template(html, { variable: 'm' });\n        $('.etsy-content').html(template({ items: data.results }));\n      });\n    })\n    .fail(function (req, status, err) {\n      $('.etsy-content').text(err.error);\n    });\n};\n","app.etsyUser = function(userID) {\n  var api = app.EtsyApi({ apiKey: 'j4t40f6swvekws6carlvptkh' });\n  var listTemplate = _.template($('#etsyShow').html(), { variable: 'm' });\n  api.userDetail(userID)\n    .done(function (data) {\n      // Let's put the data in the console so we can\n      // explore it...\n      $.get('views/user.html').done(function (html) {\n        var template = _.template(html, { variable: 'm' });\n        console.log(data.results);\n        $('.etsy-content').html(template({ users: data.results }));\n      });\n    })\n    .fail(function (req, status, err) {\n      $('.etsy-content').text(err.error);\n    });\n};\n","app.routingPage = function () {\n\n  // Our router\n  var r = Rlite();\n\n  // // Default route\n  r.add('', app.etsyShow);\n\n  // #users\n  r.add('users', showUsers);\n\n  // #users/chris -> r.params.name will equal 'chris'\n  r.add('users/:name', function (r) {\n    app.etsyUser(r.params.name);\n  });\n\n  function showUsers() {\n    console.log('hey now');\n    $.get('views/users.html').done(function (html) {\n      $('.main-content').html(html);\n    });\n  }\n\n  // Hash-based routing\n\n  function processHash() {\n    var hash = location.hash || '#';\n\n    if (!r.run(hash.slice(1))) {\n      $('.etsy-content').text('page not found');\n    }\n  }\n\n  window.addEventListener('hashchange', processHash);\n  processHash();\n\n  // TODO: We could improve this in many ways.\n\n\n  // One, every time we go to the #users or #users/foo route,\n  // we are requesting the HTML again. We ought to cache them,\n  // instead into an object (or hash table).\n  //\n  // Another thing, is we are recompiling the user.html template\n  // every time we show a user... We could cache the compiled\n  // templates, too, so they are compiled once they are downloaded\n  // and never again!\n};\n","$(function () {\n  var page = $('body').data('page');\n  app[page]();\n});\n"],"sourceRoot":"/source/"}